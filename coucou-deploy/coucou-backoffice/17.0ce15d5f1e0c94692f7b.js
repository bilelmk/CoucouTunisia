(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{BE98:function(e,t,i){"use strict";i.r(t),i.d(t,"CbAdminsModule",(function(){return ce}));var a=i("ofXK"),c=i("M9IT"),n=i("+0xr"),r=i("3Pt+"),o=i("0IaG"),s=i("GCMQ"),l=i("fXoL"),b=i("zWtS"),m=i("TDQM"),d=i("F6Mi"),u=i("6va7"),f=i("kmnG"),p=i("qFsG"),S=i("d3UM"),h=i("FKr1");function v(e,t){1&e&&(l.Tb(0,"p",14),l.Ic(1,"Ajouter un admin"),l.Sb())}function g(e,t){1&e&&(l.Tb(0,"p",14),l.Ic(1,"Modifi\xe9 l'admin"),l.Sb())}function I(e,t){1&e&&(l.Tb(0,"mat-error"),l.Ic(1," Ce champ est obligatoire "),l.Sb())}function T(e,t){1&e&&(l.Tb(0,"mat-error"),l.Ic(1," Ce champ est obligatoire "),l.Sb())}function w(e,t){1&e&&(l.Tb(0,"mat-error"),l.Ic(1," Ce champ est obligatoire "),l.Sb())}function C(e,t){1&e&&(l.Tb(0,"mat-error"),l.Ic(1," Ce champ est obligatoire "),l.Sb())}function G(e,t){if(1&e&&(l.Tb(0,"div",7),l.Tb(1,"mat-form-field",4),l.Tb(2,"mat-label"),l.Ic(3,"Mot de passe"),l.Sb(),l.Ob(4,"input",15),l.Gc(5,C,2,0,"mat-error",6),l.Sb(),l.Sb()),2&e){const e=l.fc();l.Bb(5),l.nc("ngIf",!e.form.hasError("required"))}}function B(e,t){1&e&&(l.Tb(0,"mat-error"),l.Ic(1," Ce champ est obligatoire "),l.Sb())}function k(e,t){if(1&e&&(l.Tb(0,"div",7),l.Tb(1,"mat-form-field",4),l.Tb(2,"mat-label"),l.Ic(3,"Confimer le mot de passe"),l.Sb(),l.Ob(4,"input",16),l.Gc(5,B,2,0,"mat-error",6),l.Sb(),l.Sb()),2&e){const e=l.fc();l.Bb(5),l.nc("ngIf",!e.form.hasError("required"))}}function y(e,t){if(1&e&&(l.Tb(0,"mat-option",17),l.Ic(1),l.Sb()),2&e){const e=t.$implicit;l.nc("value",e),l.Bb(1),l.Jc(e.name)}}function N(e,t){1&e&&(l.Tb(0,"mat-error"),l.Ic(1," Ce champ est obligatoire "),l.Sb())}function q(e,t){if(1&e){const e=l.Ub();l.Tb(0,"button",18),l.bc("click",(function(){return l.xc(e),l.fc().add()})),l.Ic(1," Ajouter "),l.Sb()}if(2&e){const e=l.fc();l.nc("disabled",!e.form.valid)}}function M(e,t){if(1&e){const e=l.Ub();l.Tb(0,"button",18),l.bc("click",(function(){return l.xc(e),l.fc().update()})),l.Ic(1," Sauvgarder "),l.Sb()}if(2&e){const e=l.fc();l.nc("disabled",!e.form.valid)}}let x=(()=>{class e{constructor(e,t,i,a,c,n,o){this.spinnerService=e,this.dialog=t,this.matDialogRef=i,this.snackbarService=a,this.adminService=c,this.data=n,this.roleService=o,this.roles=[],this.form=new r.g(this.data.isEditMode?{firstname:new r.e(n.item.firstname,r.u.required),lastname:new r.e(n.item.lastname,r.u.required),username:new r.e(n.item.username,r.u.required),roleId:new r.e(n.item.role,r.u.required)}:{firstname:new r.e("",r.u.required),lastname:new r.e("",r.u.required),password:new r.e("",r.u.required),confirm:new r.e("",r.u.required),username:new r.e("",r.u.required),roleId:new r.e("",r.u.required)})}ngOnInit(){this.roleService.getAll().subscribe(e=>{this.roles=e},e=>{console.log(e)})}add(){this.spinnerService.activate(),this.form.value.roleId=this.form.value.roleId.id,this.adminService.add(this.form.value).subscribe(e=>{s.a.addToArray(e,this.data.array),this.snackbarService.openSnackBar("Administrateur ajout\xe9 avec succ\xe8s","success"),this.spinnerService.deactivate(),this.matDialogRef.close()},e=>{console.log(e),this.snackbarService.openSnackBar("Erreur lors de l'ajout de l'administrateur","fail"),this.spinnerService.deactivate()})}update(){this.form.value.roleId=this.form.value.roleId.id,this.adminService.update(this.form.value,this.data.item.id).subscribe(e=>{s.a.updateFields(this.form.value,this.data.item),this.snackbarService.openSnackBar("Administrateur modifier avec succ\xe8s","success"),this.matDialogRef.close()},e=>{this.snackbarService.openSnackBar("Erreur lors de la modification de l'administrateur","fail")})}compareFn(e,t){return e.id===t.id}}return e.\u0275fac=function(t){return new(t||e)(l.Nb(b.a),l.Nb(o.b),l.Nb(o.d),l.Nb(m.a),l.Nb(d.a),l.Nb(o.a),l.Nb(u.a))},e.\u0275cmp=l.Hb({type:e,selectors:[["app-cb-admins-modal"]],decls:34,vars:13,consts:[[1,"dialog-container"],["class","dialog-title",4,"ngIf"],[1,"row","justify-content-center","align-items-center","p-4","pt-3",3,"formGroup"],[1,"col-12"],["appearance","outline",1,"full-width"],["formControlName","firstname","matInput","","type","text","required",""],[4,"ngIf"],[1,"col-12","mt-1"],["formControlName","lastname","matInput","","type","text","required",""],["formControlName","username","matInput","","type","text","required",""],["class","col-12 mt-1",4,"ngIf"],["formControlName","roleId",3,"compareWith"],[3,"value",4,"ngFor","ngForOf"],["class","submit-btn full-width",3,"disabled","click",4,"ngIf"],[1,"dialog-title"],["formControlName","password","matInput","","type","password","required",""],["formControlName","confirm","matInput","","type","password","required",""],[3,"value"],[1,"submit-btn","full-width",3,"disabled","click"]],template:function(e,t){1&e&&(l.Tb(0,"div",0),l.Gc(1,v,2,0,"p",1),l.Gc(2,g,2,0,"p",1),l.Tb(3,"form",2),l.Tb(4,"div",3),l.Tb(5,"mat-form-field",4),l.Tb(6,"mat-label"),l.Ic(7,"Nom"),l.Sb(),l.Ob(8,"input",5),l.Gc(9,I,2,0,"mat-error",6),l.Sb(),l.Sb(),l.Tb(10,"div",7),l.Tb(11,"mat-form-field",4),l.Tb(12,"mat-label"),l.Ic(13,"Pr\xe9nom"),l.Sb(),l.Ob(14,"input",8),l.Gc(15,T,2,0,"mat-error",6),l.Sb(),l.Sb(),l.Tb(16,"div",7),l.Tb(17,"mat-form-field",4),l.Tb(18,"mat-label"),l.Ic(19,"Nom d'utilisateur"),l.Sb(),l.Ob(20,"input",9),l.Gc(21,w,2,0,"mat-error",6),l.Sb(),l.Sb(),l.Gc(22,G,6,1,"div",10),l.Gc(23,k,6,1,"div",10),l.Tb(24,"div",7),l.Tb(25,"mat-form-field",4),l.Tb(26,"mat-label"),l.Ic(27,"Role"),l.Sb(),l.Tb(28,"mat-select",11),l.Gc(29,y,2,2,"mat-option",12),l.Sb(),l.Gc(30,N,2,0,"mat-error",6),l.Sb(),l.Sb(),l.Tb(31,"div",7),l.Gc(32,q,2,1,"button",13),l.Gc(33,M,2,1,"button",13),l.Sb(),l.Sb(),l.Sb()),2&e&&(l.Bb(1),l.nc("ngIf",!t.data.isEditMode),l.Bb(1),l.nc("ngIf",t.data.isEditMode),l.Bb(1),l.nc("formGroup",t.form),l.Bb(6),l.nc("ngIf",!t.form.hasError("required")),l.Bb(6),l.nc("ngIf",!t.form.hasError("required")),l.Bb(6),l.nc("ngIf",!t.form.hasError("required")),l.Bb(1),l.nc("ngIf",!t.data.isEditMode),l.Bb(1),l.nc("ngIf",!t.data.isEditMode),l.Bb(5),l.nc("compareWith",t.compareFn),l.Bb(1),l.nc("ngForOf",t.roles),l.Bb(1),l.nc("ngIf",!t.form.hasError("required")),l.Bb(2),l.nc("ngIf",!t.data.isEditMode),l.Bb(1),l.nc("ngIf",t.data.isEditMode))},directives:[a.k,r.v,r.o,r.h,f.c,f.f,r.c,p.b,r.n,r.f,r.t,S.a,a.j,f.b,h.l],styles:[""]}),e})();var D=i("oj2T"),O=i("5chL"),E=i("NFeN");function R(e,t){1&e&&(l.Tb(0,"mat-header-cell"),l.Ic(1,"Nom d'utilisateur"),l.Sb())}function A(e,t){if(1&e&&(l.Tb(0,"mat-cell"),l.Tb(1,"p",26),l.Ic(2),l.Sb(),l.Sb()),2&e){const e=t.$implicit;l.Bb(2),l.Kc(" ",e.username," ")}}function F(e,t){1&e&&(l.Tb(0,"mat-header-cell"),l.Ic(1,"Nom"),l.Sb())}function L(e,t){if(1&e&&(l.Tb(0,"mat-cell"),l.Tb(1,"p",26),l.Ic(2),l.Sb(),l.Sb()),2&e){const e=t.$implicit;l.Bb(2),l.Kc(" ",e.firstname," ")}}function j(e,t){1&e&&(l.Tb(0,"mat-header-cell"),l.Ic(1,"Pr\xe9nom"),l.Sb())}function Q(e,t){if(1&e&&(l.Tb(0,"mat-cell"),l.Tb(1,"p",26),l.Ic(2),l.Sb(),l.Sb()),2&e){const e=t.$implicit;l.Bb(2),l.Kc(" ",e.lastname," ")}}function $(e,t){1&e&&(l.Tb(0,"mat-header-cell"),l.Ic(1,"Role"),l.Sb())}function K(e,t){if(1&e&&(l.Tb(0,"mat-cell"),l.Tb(1,"p",26),l.Ic(2),l.Sb(),l.Sb()),2&e){const e=t.$implicit;l.Bb(2),l.Kc(" ",null==e.role?null:e.role.name," ")}}function H(e,t){1&e&&(l.Tb(0,"mat-header-cell"),l.Ic(1,"Active"),l.Sb())}function U(e,t){1&e&&(l.Tb(0,"mat-icon",29),l.Ic(1,"remove_circle"),l.Sb())}function z(e,t){1&e&&(l.Tb(0,"mat-icon",30),l.Ic(1,"check_circle"),l.Sb())}function P(e,t){if(1&e&&(l.Tb(0,"mat-cell",26),l.Tb(1,"div",26),l.Gc(2,U,2,0,"mat-icon",27),l.Gc(3,z,2,0,"mat-icon",28),l.Sb(),l.Sb()),2&e){const e=t.$implicit;l.Bb(2),l.nc("ngIf",!e.active),l.Bb(1),l.nc("ngIf",e.active)}}function J(e,t){1&e&&(l.Tb(0,"mat-header-cell"),l.Ic(1,"Actions"),l.Sb())}function W(e,t){if(1&e){const e=l.Ub();l.Tb(0,"mat-cell",26),l.Tb(1,"div",31),l.bc("click",(function(){l.xc(e);const i=t.$implicit;return l.fc(3).toggleActiveStatus(i)})),l.Tb(2,"mat-icon"),l.Ic(3,"flaky"),l.Sb(),l.Sb(),l.Tb(4,"div",31),l.bc("click",(function(){l.xc(e);const i=t.$implicit;return l.fc(3).openModal(!0,i)})),l.Tb(5,"mat-icon"),l.Ic(6,"mode_edit"),l.Sb(),l.Sb(),l.Sb()}}function _(e,t){1&e&&l.Ob(0,"mat-header-row",32)}function X(e,t){1&e&&l.Ob(0,"mat-row",33)}const V=function(){return[10]};function Y(e,t){if(1&e&&(l.Tb(0,"div",12),l.Tb(1,"table",13),l.Rb(2,14),l.Gc(3,R,2,0,"mat-header-cell",15),l.Gc(4,A,3,1,"mat-cell",16),l.Qb(),l.Rb(5,17),l.Gc(6,F,2,0,"mat-header-cell",15),l.Gc(7,L,3,1,"mat-cell",16),l.Qb(),l.Rb(8,18),l.Gc(9,j,2,0,"mat-header-cell",15),l.Gc(10,Q,3,1,"mat-cell",16),l.Qb(),l.Rb(11,19),l.Gc(12,$,2,0,"mat-header-cell",15),l.Gc(13,K,3,1,"mat-cell",16),l.Qb(),l.Rb(14,20),l.Gc(15,H,2,0,"mat-header-cell",15),l.Gc(16,P,4,2,"mat-cell",21),l.Qb(),l.Rb(17,22),l.Gc(18,J,2,0,"mat-header-cell",15),l.Gc(19,W,7,0,"mat-cell",21),l.Qb(),l.Gc(20,_,1,0,"mat-header-row",23),l.Gc(21,X,1,0,"mat-row",24),l.Sb(),l.Ob(22,"mat-paginator",25),l.Sb()),2&e){const e=l.fc(2);l.Bb(1),l.nc("dataSource",e.dataSource),l.Bb(19),l.nc("matHeaderRowDef",e.displayedColumns),l.Bb(1),l.nc("matRowDefColumns",e.displayedColumns),l.Bb(1),l.nc("pageSizeOptions",l.pc(4,V))}}function Z(e,t){if(1&e){const e=l.Ub();l.Tb(0,"div",1),l.Tb(1,"div",2),l.Tb(2,"p",3),l.Tb(3,"span",4),l.Ic(4,"people"),l.Sb(),l.Ic(5," Liste des admins "),l.Sb(),l.Tb(6,"div",5),l.Tb(7,"input",6,7),l.bc("input",(function(){l.xc(e);const t=l.tc(8);return l.fc().applyFilter(t.value)})),l.Sb(),l.Tb(9,"button",8),l.bc("click",(function(){return l.xc(e),l.fc().openModal(!1,null)})),l.Tb(10,"i",9),l.Ic(11," add "),l.Sb(),l.Sb(),l.Sb(),l.Sb(),l.Gc(12,Y,23,5,"div",10),l.Ob(13,"app-cb-errors",11),l.Sb()}if(2&e){const e=l.fc();l.Bb(12),l.nc("ngIf",(null==e.admins?null:e.admins.length)>0),l.Bb(1),l.nc("array",e.admins)("error",e.error)}}let ee=(()=>{class e{constructor(e,t,i,a){this.adminsService=e,this.spinnerService=t,this.dialog=i,this.alertService=a,this.dataSource=new n.k,this.displayedColumns=["firstname","lastname","username","role","active","buttons"],this.admins=[],this.error=!1,this.loading=!1}set paginator(e){e&&(this.dataSource.paginator=e)}ngOnInit(){this.loading=!0,this.spinnerService.activate(),this.adminsService.getAll().subscribe(e=>{this.loading=!1,this.admins=e,this.dataSource.data=e,this.spinnerService.deactivate()},e=>{this.loading=!1,this.error=!0,this.spinnerService.deactivate()})}openModal(e,t){this.dialog.open(x,{panelClass:"custom-dialog-container",width:"600px",data:{item:t,array:this.admins,isEditMode:e}}).afterClosed().subscribe(e=>{this.dataSource.data=this.admins})}toggleActiveStatus(e){this.spinnerService.activate(),1==e.active?this.adminsService.block(e.id).subscribe(t=>{e.active=!1,this.spinnerService.deactivate()},e=>{this.spinnerService.deactivate(),console.log(e)}):0==e.active&&this.adminsService.deblock(e.id).subscribe(t=>{e.active=!0,this.spinnerService.deactivate()},e=>{this.spinnerService.deactivate(),console.log(e)})}applyFilter(e){let t=[...this.admins];t=t.filter(t=>-1!==t.username.toLowerCase().indexOf(e.toLowerCase())||-1!==t.firstname.toLowerCase().indexOf(e.toLowerCase())||-1!==t.lastname.toLowerCase().indexOf(e.toLowerCase())),this.dataSource.data=t}}return e.\u0275fac=function(t){return new(t||e)(l.Nb(d.a),l.Nb(b.a),l.Nb(o.b),l.Nb(D.a))},e.\u0275cmp=l.Hb({type:e,selectors:[["app-cb-admins"]],viewQuery:function(e,t){var i;1&e&&l.Lc(c.a,!0),2&e&&l.sc(i=l.cc())&&(t.paginator=i.first)},decls:1,vars:1,consts:[["class","page",4,"ngIf"],[1,"page"],[1,"row","mt-2","mb-2","justify-content-between","align-items-center"],[1,"title"],[1,"material-icons","title-icon"],[1,"row","align-items-center"],[1,"search",3,"input"],["key",""],[1,"square-btn","ml-2",3,"click"],[1,"material-icons","icon-blue"],["class","row",4,"ngIf"],[3,"array","error"],[1,"row"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","username"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","firstname"],["matColumnDef","lastname"],["matColumnDef","role"],["matColumnDef","active"],["class","cell-text",4,"matCellDef"],["matColumnDef","buttons"],["class","text-center",4,"matHeaderRowDef"],["class","contact",4,"matRowDef","matRowDefColumns"],[1,"full-width",3,"pageSizeOptions"],[1,"cell-text"],["class","icon-danger",4,"ngIf"],["class","icon-success",4,"ngIf"],[1,"icon-danger"],[1,"icon-success"],[1,"cell-btn",3,"click"],[1,"text-center"],[1,"contact"]],template:function(e,t){1&e&&l.Gc(0,Z,14,3,"div",0),2&e&&l.nc("ngIf",!t.loading)},directives:[a.k,O.a,n.j,n.c,n.e,n.b,n.g,n.i,c.a,n.d,n.a,E.a,n.f,n.h],styles:[""]}),e})();var te=i("tyNb"),ie=i("PCNd");const ae=[{path:"",component:ee}];let ce=(()=>{class e{}return e.\u0275mod=l.Lb({type:e}),e.\u0275inj=l.Kb({factory:function(t){return new(t||e)},imports:[[a.c,te.e.forChild(ae),o.c,r.s,f.e,p.c,n.l,E.b,c.b,ie.a,S.b]]}),e})()}}]);